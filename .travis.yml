matrix:
    include:
        - name: "Linux pytest"
          services:
            - docker
          language: minimal
          env:
            - BUILD_WHEEL=true
            - OS=linux
        - name: "Linux ctest"
          services:
            - docker
          language: minimal
          env:
            - BUILD_WHEEL=false
            - OS=linux
        - name: "Linux clang-tidy"
          services:
            - docker
          language: minimal
          env:
            - USE_CLANG_TIDY
            - OS=linux
        - name: "macOS py3.7"
          os: osx
          language: shell
          osx_image: xcode10.1
          env: OS=osx
          addons:
              homebrew:
                packages:
                - gcc@8
                - verilator


script:
    - ./scripts/ci.sh

deploy:
  - provider: script
    script: /bin/bash scripts/deploy.sh
    on:
      branch: master
      tags: true
